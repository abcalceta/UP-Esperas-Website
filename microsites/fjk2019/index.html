<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="Filipino Esperanto Youth Congress 2020">

		<title>Home | Philippine Esperanto Youth Congress 2020</title>

		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
		<link rel="stylesheet" href="style.css">
    </head>
    <body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script src="https://unpkg.com/mithril/mithril.js"></script>
        <script src="templates/hero.js"></script>
        <script>
        let root = document.body

        function initDomScripts() {
            M.Parallax.init(document.querySelectorAll(".parallax"))
            M.Sidenav.init(document.querySelectorAll(".sidenav"))
            M.Dropdown.init(document.querySelectorAll(".dropdown-trigger"), {hover: true})

            document.getElementById('a-main-content').addEventListener('click', e => {
                e.preventDefault()

                document.getElementById('main-content').scrollIntoView({behavior: 'smooth'})
            })
        }

        function BasePage(heroData, mainData) {
            this.componentHolder = {}
            this.data.hero = {
                altText: "",
                bgImg: "",
                headText: "",
                subTexts: []
            }
            this.data.main = {
                path: ""
            }

            this.oninit = function() {
                m.request({
                    method: "GET",
                    responseType: "text",
                    url: "templates/footer.jsx"
                })
                .then(t => {
                    this.componentHolder.footer = t
                })
            }

            this.oncreate = function() {
                initDomScripts()
            }

            this.getMithrilObj = function() {
                return {
                    componentHolder: this.componentHolder,
                    oninit: this.oninit,
                    oncreate: this.oncreate,
                    view: this.view
                }
            }
        }

        let IndexPage = {
            componentHolder: {},
            oninit: () => {
                m.request({
                    method: "GET",
                    responseType: "text",
                    url: "templates/index.jsx"
                })
                .then(t => {
                    IndexPage.componentHolder.main = t
                })

                m.request({
                    method: "GET",
                    responseType: "text",
                    url: "templates/footer.jsx"
                })
                .then(t => {
                    IndexPage.componentHolder.footer = t
                })

                IndexPage.componentHolder.hero = heroTpl("Cover Photo", "img/banderitas_home_banner.jpg", [
                    m("h1", {class: "white-text"}, "The First Philippine Esperanto Youth Congress"),
                    m("h5", {class: "white-text"}, "April 23-26, 2020"),
                    m("h5", {class: "white-text"}, "Manila, Philippines")
                ])
            },
            oncreate: initDomScripts,
            view: function() {
                return [
                    IndexPage.componentHolder.hero,
                    m("main", {id: "main-content", class:"container"},
                        m.trust(IndexPage.componentHolder.main)
                    ),
                    m("footer", {class: "page-footer yellow accent-2"},
                        m.trust(IndexPage.componentHolder.footer)
                    )
                ]
            }
        }

        let DonatePage = {
            componentHolder: {},
            oninit: () => {
                m.request({
                    method: "GET",
                    responseType: "text",
                    url: "templates/donate.jsx"
                })
                .then(t => {
                    DonatePage.componentHolder.main = t
                })

                m.request({
                    method: "GET",
                    responseType: "text",
                    url: "templates/footer.jsx"
                })
                .then(t => {
                    console.log(this)
                    DonatePage.componentHolder.footer = t
                })

                DonatePage.componentHolder.hero = heroTpl("Cover Photo", "img/eo_flags_banner.jpg", [
                    m("h1", {class: "white-text"}, "Donations"),
                    m("h5", {class: "white-text"}, "The First Philippine Esperanto Youth Congress")
                ])
            },
            oncreate: initDomScripts,
            view: function() {
                return [
                    DonatePage.componentHolder.hero,
                    m("main", {id: "main-content", class:"container"}, [
                        m.trust(DonatePage.componentHolder.main)
                    ]),
                    m("footer", {class: "page-footer yellow accent-2"},
                        m.trust(DonatePage.componentHolder.footer)
                    )
                ]
            }
        }

        m.route(root, "/", {
            "/": IndexPage,
            "/donate": DonatePage
        })
        </script>
    </body>
</html>