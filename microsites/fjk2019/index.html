<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="Filipino Esperanto Youth Congress 2020">

		<title>Home | Philippine Esperanto Youth Congress 2020</title>

		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
		<link rel="stylesheet" href="style.css">
    </head>
    <body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script src="https://unpkg.com/mithril/mithril.js"></script>
        <script>
        let root = document.body

        let heroTpl = (imgAlt, imgSrcPath, containerElm) => m("header", {class: "parallax-container hero valign-wrapper"}, [
            m("div", {class: "parallax"}, [
                m("img", {alt: imgAlt, src: imgSrcPath, width: "1024"})
            ]),
            m("div", {class: "container"}, containerElm),
            m("a", {id: "a-main-content", href: "#main-content", class: "material-icons hero-down-marker"}, "expand_more")
        ])

        function initDomScripts() {
            M.Parallax.init(document.querySelectorAll(".parallax"))
            M.Sidenav.init(document.querySelectorAll(".sidenav"))
            M.Dropdown.init(document.querySelectorAll(".dropdown-trigger"), {hover: true})

            document.getElementById('a-main-content').addEventListener('click', e => {
                e.preventDefault()

                document.getElementById('main-content').scrollIntoView({behavior: 'smooth'})
            })
        }

        function initPages() {
            let IndexPage = {
                oninit: () => {
                    fetch("templates/index.jsx").then(t => t.text())
                },
                view: function() {
                    return m.render(root, [
                        m.trust(resArray[0]),
                        heroTpl("Cover Photo", "img/banderitas_home_banner.jpg", [
                            m("h1", {class: "white-text"}, "The First Philippine Esperanto Youth Congress"),
                            m("h5", {class: "white-text"}, "April 23-26, 2020"),
                            m("h5", {class: "white-text"}, "Manila, Philippines")
                        ]),
                        m("main", {id: "main-content", class:"container"}, [
                            m.trust(resArray[1])
                        ]),
                        m("footer", {class: "page-footer yellow accent-2"}, [
                            m.trust(resArray[2])
                        ])
                    ])
                },
                oncreate: function() {
                    initDomScripts()
                }
            }

            m.route(root, "/", {
                "/": IndexPage
            })
        }

        Promise.all([
            fetch("templates/navbar.jsx").then(t => t.text()),
            fetch("templates/footer.jsx").then(t => t.text())
        ])
        .then(resArray => {
            initPages(resArray)
        })
        </script>
    </body>
</html>